{% extends 'landingpage.html' %}

{% block body %}



    


<div class="container-fluid" >

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-success" role="alert">
          {{ message }}
        </div>
        
        
      {% endfor %}
    {% endif %}
    {% endwith %}
    <br>

    {% if low_quantity_flash %}
    <div class="alert alert-danger" role="alert">
        {{ low_quantity_flash }}
    </div>
{% endif %}



       

    <div class="container-fluid">
       
        <div class="row g-6 mb-6">
          
            
    
          <div class="card shadow border-0 mb-7 ">
            <div class="card-header d-flex " style="justify-content:space-between;">
                <h5 class="mb-0">All Claims</h5>
              <a href="/cisl">  <h5 class="mb-0 bg-primary text-white p-2" style="border-radius:5px; font-size:13px;"> <i class="bi bi-plus"></i>Add New</h5></a>
            </div>
            <div class="table-responsive">
                <table class="table table-hover table-nowrap">
                    <thead class="thead-light">
                        <tr>
                           <!-- <th scope="col">Client ID</th>-->
                            <th scope="col">Client Name</th>
                            <th scope="col">Staff Name</th>
                            <th scope="col">DOI</th>
                            <th scope="col">TOI</th>
                    
                            <th scope="col">Status</th>
                            <th scope="col">Type of Incident</th>
                            <th scope="col">Contact Number</th>
                            <th scope="col">Cost</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        {%for users in users%} 
                        <tr>
                          <!-- 
                            <td>
                                
                                <a class="text-heading font-semibold" href="#">
                                    {{users.clientid}}
                                </a>
                            </td>-->
                            <td>
                                
                                <a class="text-heading font-semibold" href="#">
                                    {{users.clientname}}
                                </a>
                            </td>
                            <td>
                                
                                <a class="text-heading font-semibold" href="#">
                                    {{users.name}}
                                </a>
                            </td>
                            <td>
                               
                                {{users.date}}
                            
                            
                                <!--<span class="badge badge-lg badge-dot">
                                    {{users.tag}}
                                </span>-->
                            </td>
    
                            <td>
                                {{users.time}}
                            </td>
                           

                            
                            
                            <td>
                                {% if users.status == 'pending'%}
                                <span class="badge badge-pill bg-soft-warning text-dark me-2">
                                    {% elif users.status == 'in-progress'%}
                                    <span class="badge badge-pill bg-soft-primary text-dark me-2">
                                    {% elif users.status == 'completed'%}
                                    <span class="badge badge-pill bg-soft-success text-dark me-2">
                                        {% elif users.status == 'denied'%}
                                        <span class="badge badge-pill bg-soft-danger text-dark me-2">
                                      
                                        {%endif%}
                                     
                                   {{ users.status}}
                              
                            </td>
                                <td>
                                   {{ users.incident}}
                                
                            </td>

                            <td>
                               
                              
                                
                                    {{users.contact_number}}
                             
    
                            </td>
    
                            <td>
                                <span class="badge badge-lg badge-dot">
                                 {{users.cost}}
                                </span>
                            </td>
                           
                            
                            {% if current_user.role =='admin'%}
                            <td>
                                <div class="dropdown">
                                    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                      Actions
                                    </button>
                                    <ul class="dropdown-menu">
                                      <li><a  class="dropdown-item" href="{{url_for('update_claim_status', id=users.id, status='pending')}}">Pending</a></li>
                                      <li><a class="dropdown-item" href="{{url_for('update_claim_status', id=users.id, status='in-progress')}}">In-progress</a></li>
                                      <li><a class="dropdown-item" href="{{url_for('update_claim_status', id=users.id, status='completed')}}">Completed</a></li>
                                      <li><a class="dropdown-item" href="{{url_for('update_claim_status', id=users.id, status='denied')}}">Denied</a></li>
                                    </ul>
                                  </div>
                            </td>
                            {% else %}
    
                            <td class="text-end">
                                <button type="button" class="btn btn-sm btn-square btn-neutral text-danger-hover">
                                    <i class="bi bi-box-arrow-right"></i>
                                </button>
                            </td>
                            {% endif %}
                        </tr>
    
                        {%endfor%}
                    </tbody>
                </table>
            </div>
            <div class="card-footer border-0 py-5">
                <span class="text-muted text-sm">Showing 10 items per page</span>
            </div>
        </div>
      
     
    </div>
    
    
       <!-- <div class="card-footer border-0 py-5">
            <span class="text-muted text-sm" style="margin-left:500px; margin:">Powered by PrestoGhana</span>
        </div>
-->

  
    </div>
</div>


{%endblock body%}
